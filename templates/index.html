{% extends "base.html" %}
{% block content %}
  <h2>Reported Items</h2>
  <form method="get" class="search-form">
    <input type="text" name="q" placeholder="Search title or description" value="{{ q }}">
    <select name="category">
      <option value="">All</option>
      <option value="lost" {% if category=='lost' %}selected{% endif %}>Lost</option>
      <option value="found" {% if category=='found' %}selected{% endif %}>Found</option>
    </select>
    <button type="submit">Search</button>
  </form>

  {% if items %}
    <div class="grid">
      {% for item in items %}
        <div class="card">
          <div class="card-inner">
            <div class="card-front">
              {% if item.image_filename %}
                <img src="{{ url_for('static', filename='uploads/' + item.image_filename) }}" alt="photo" class="thumb">
              {% else %}
                <p>No image available</p>
              {% endif %}
              <h3>{{ item.title }}</h3>
              <p class="meta">{{ item.category | capitalize }} â€¢ {{ item.status }}</p>
            </div>
            <div class="card-back">
              <p>{{ item.description }}</p>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p>No items reported yet. Be the first to <a href="{{ url_for('report') }}">report an item</a>.</p>
  {% endif %}
{% endblock %}
